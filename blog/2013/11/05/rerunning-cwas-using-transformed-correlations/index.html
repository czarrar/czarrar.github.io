
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Rerunning CWAS using Transformed Correlations - Zarrar's Journaling</title>
  <meta name="author" content="Zarrar Shehzad">

  
  <meta name="description" content="We had previously been using the semi-metric 1-r, however are now with a reviewer’s suggestion switching to a metric using a slight transformation of &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://czarrar.github.io/blog/2013/11/05/rerunning-cwas-using-transformed-correlations/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Zarrar's Journaling" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">mob</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">Zarrar's Journaling</a></h1>
  
    <h2>To the edge and beyond</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:czarrar.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
        <h1 class="entry-title">Rerunning CWAS Using Transformed Correlations</h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-11-05T20:26:00-05:00" pubdate data-updated="true">Nov 5<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>We had previously been using the semi-metric <code>1-r</code>, however are now with a reviewer’s suggestion switching to a metric using a slight transformation of the prior person correlation <code>sqrt(2*1-r)</code><sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>. This change although simple will require a massive effort to semi-reanalyze everything.</p>

<p>We also making another change in the way the permuted hat matrices are generated due to a last minute discovery by Phil. Previously, we had permuted the rows for the columns of interest. The issue with this approach is if the variable of interest is correlated with the covariates, then our permutation will effect both the variable of interest and our covariates. Consequently, we will regress out the covariates of non-interest from our variable of interest. We will then have the fitted response and the residuals. We will permute the order of the residuals and then add back the fitted response.</p>

<blockquote>
  <p>Note: I need to ask Phil what the approach is if your variable of interest has more than one column. I’m guessing you apply this procedure to each column of the variable separately?</p>
</blockquote>

<figure class="flickr-thumbnail testing my new creature" style="width: 240px;"><a href="http://farm6.staticflickr.com/5510/10896013916_4696b79800_z.jpg" class="fancybox" data-title-id="flickr-photo-10896013916" data-media="photo"><img src="http://farm6.staticflickr.com/5510/10896013916_4696b79800_m.jpg" title="Testing Brain" style="width: 240px; height: 164px;" /></a><figcaption id="flickr-photo-10896013916"><h1><a class="flickr-link" href="http://www.flickr.com/photos/96917171@N07/10896013916">Testing Brain</a> by czarrar</h1><div class="description"></div></figcaption></figure>

<h2 id="code">Code</h2>

<h3 id="transformation-of-distances">Transformation of Distances</h3>

<p>The first order of business is creating a function that easily transforms my big matrices and re-generates the gower centered matrices. A few nuances is that I need to make sure to set the number of threads to use in advance (otherwise all processors will be occupied) and to set the memory limit for gower centering.</p>

<p>The actual command can be called from bash with the following usage:</p>

<p><code>./transform_cor.R distance-descriptor memlimit nthreads</code></p>

<ul>
  <li><em>distance-descriptor</em>: File path to the subject distances descriptor</li>
  <li><em>memlimit</em>: Upper bound on RAM to use</li>
  <li><em>nthreads</em>: Number of threads to use for matrix algebra operations</li>
</ul>

<h3 id="permuting-residuals-of-predictor-variable">Permuting Residuals of Predictor Variable</h3>

<p>I made an addition to the MDMR model generation functions and made the new residual based approach of generating permuted hat matrices, the default. Below is the function (added within two functions). The critical new lines are highlighted.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>mark:5-9</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">permute_rhs_residuals <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="c1"># H</span>
</span><span class="line">    Xj      <span class="o">&lt;-</span> rhs
</span><span class="line">    cols    <span class="o">&lt;-</span> grps <span class="o">%in%</span> u.grps<span class="p">[</span>f.ind<span class="p">]</span>
</span><span class="line">    <span class="c1">## permute residuals</span>
</span><span class="line">    <span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> which<span class="p">(</span>cols<span class="p">))</span> <span class="p">{</span>
</span><span class="line">        model   <span class="o">&lt;-</span> lm<span class="p">(</span>Xj<span class="p">[,</span>i<span class="p">]</span> <span class="o">~</span> Xj<span class="p">[,</span><span class="o">!</span>cols<span class="p">])</span>
</span><span class="line">        Xj<span class="p">[,</span>i<span class="p">]</span>  <span class="o">&lt;-</span> model<span class="o">$</span>residuals<span class="p">[</span>o.inds<span class="p">]</span> <span class="o">+</span> model<span class="o">$</span>fitted.values
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="c1">## hat matrixx</span>
</span><span class="line">    qrX     <span class="o">&lt;-</span> qr<span class="p">(</span>Xj<span class="p">,</span> tol<span class="o">=</span>TOL<span class="p">)</span>
</span><span class="line">    Q       <span class="o">&lt;-</span> qr.Q<span class="p">(</span>qrX<span class="p">)</span>
</span><span class="line">    H       <span class="o">&lt;-</span> tcrossprod<span class="p">(</span>Q<span class="p">[,</span><span class="m">1</span><span class="o">:</span>qrX<span class="o">$</span>rank<span class="p">])</span>
</span><span class="line">
</span><span class="line">    <span class="c1"># H2</span>
</span><span class="line">    cols    <span class="o">&lt;-</span> grps <span class="o">%in%</span> u.grps<span class="p">[</span><span class="o">-</span>f.ind<span class="p">]</span>
</span><span class="line">    Xj      <span class="o">&lt;-</span> rhs<span class="p">[,</span>cols<span class="p">]</span>
</span><span class="line">    qrX     <span class="o">&lt;-</span> qr<span class="p">(</span>Xj<span class="p">,</span> tol <span class="o">=</span> TOL<span class="p">)</span>
</span><span class="line">    Q       <span class="o">&lt;-</span> qr.Q<span class="p">(</span>qrX<span class="p">)</span>
</span><span class="line">    H2      <span class="o">&lt;-</span> H <span class="o">-</span> tcrossprod<span class="p">(</span>Q<span class="p">[,</span> <span class="m">1</span><span class="o">:</span>qrX<span class="o">$</span>rank<span class="p">])</span>
</span><span class="line">
</span><span class="line">    H2
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="normandy-aka-redoing-almost-all-figures">Normandy (aka Redoing Almost All Figures)</h2>

<h3 id="what-figures">What Figures</h3>

<p>Below are the list of figures in the main paper and whether I need to redo it or not.</p>

<ol>
  <li><strong>Yes</strong> Since this is an example figure, I don’t think I need to redo the particular analysis. However, I do need to edit the figure so it shows <code>sqrt(2*(1-r))</code>.</li>
  <li><strong>No</strong> Just a table.</li>
  <li><strong>Yes</strong> Redo 2 analyses and 3 surface maps.</li>
  <li><strong>Yes</strong> Redo 2 analyses and 2 histograms <em>(depends on 3)</em>.</li>
  <li><strong>Yes</strong> Redo network summary and surface map <em>(depends on 3)</em>.</li>
  <li><strong>Yes</strong> Redo 3 surface maps <em>(depends on 3)</em>.</li>
  <li><strong>Yes</strong> Redo 6 analyses and 6 surface maps <em>(depends on 3)</em>.</li>
  <li><strong>Yes</strong> Redo 2 scatter plots, 2 analyses, and 4 surface maps.</li>
  <li><strong>Yes</strong> Redo 2 bar plots.</li>
  <li><strong>Yes</strong> Redo 3 analyses, 3 surface maps, and 3 network summaries.</li>
  <li><strong>Yes</strong> Redo 4 analyses and 4 surface maps.</li>
  <li>
    <p><strong>Yes</strong> Redo 3 analyses and 4 surface maps.
Supplementary Figures</p>
  </li>
  <li><strong>Yes</strong> 3 analyses, 3 surface maps, and 2 scatter plots.</li>
  <li><strong>Yes</strong> ?</li>
  <li><strong>Yes</strong> 2 analyses and 2 surface maps.</li>
  <li><strong>Yes</strong> 6 analyses and 6 surface maps.</li>
  <li><strong>Yes</strong> 3 analyses and 3 surface maps.</li>
  <li><strong>Yes</strong> 3+ analyses and 3 plots.</li>
</ol>

<h3 id="figure-3-done">Figure 3 (DONE)</h3>

<h4 id="transformation--mdmr">Transformation + MDMR</h4>

<p>I’m running <code>32_mdmr_runner.bash</code>, which runs the following two commands:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">./30_mdmr.bash short compcor 8
</span><span class="line">./30_mdmr.bash medium compcor 8
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Each of those in turn will run the following commands (excerpt from longer script):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">echo</span> <span class="s2">&quot;Voxelwise&quot;</span>
</span><span class="line"><span class="nv">sdistdir</span><span class="o">=</span><span class="s2">&quot;${distbase}/${strategy}_kvoxs${sm}_to_kvoxs${sm}&quot;</span>
</span><span class="line"><span class="nv">curdir</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>
</span><span class="line">
</span><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/lib
</span><span class="line">./transform_cor.R <span class="k">${</span><span class="nv">sdistdir</span><span class="k">}</span>/subdist.desc 30 12
</span><span class="line"><span class="nb">cd</span> <span class="nv">$curdir</span>
</span><span class="line">
</span><span class="line"><span class="nb">time </span>connectir_mdmr.R -i <span class="k">${</span><span class="nv">sdistdir</span><span class="k">}</span> <span class="se">\</span>
</span><span class="line">    --formula <span class="s2">&quot;FSIQ + Age + Sex + ${scan}_meanFD&quot;</span> <span class="se">\</span>
</span><span class="line">    --model <span class="k">${</span><span class="nv">subdir</span><span class="k">}</span>/subject_info_with_iq_and_gcors.csv <span class="se">\</span>
</span><span class="line">    --factors2perm <span class="s2">&quot;FSIQ&quot;</span> <span class="se">\</span>
</span><span class="line">    --permutations 14999 <span class="se">\</span>
</span><span class="line">    --forks 1 --threads 12 <span class="se">\</span>
</span><span class="line">    --memlimit 12 <span class="se">\</span>
</span><span class="line">    --save-perms <span class="se">\</span>
</span><span class="line">    --ignoreprocerror <span class="se">\</span>
</span><span class="line">    iq_age+sex+meanFD.mdmr
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="multiple-comparisons-correction">Multiple Comparisons Correction</h4>

<p>Then with <code>36_mdmr_correct_runner.bash</code>, I ran the following lines:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">./34_mdmr_correct.bash short compcor 8; <span class="se">\</span>
</span><span class="line">./34_mdmr_correct.bash medium compcor 8
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="plots">Plots</h4>

<p>Ran the same two set of scripts</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/fig_03
</span><span class="line">./A1_cwas_iq_pysurfer_easythresh.py
</span><span class="line">./B1_cwas_iq_overlap_easythresh.py
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="figure-4-done">Figure 4 (DONE)</h3>

<p>This figure examines the percent of significant associations for each permutation (false positives) and creates a histogram.</p>

<h4 id="setup">Setup</h4>

<p>I use a reference set of permutations or my null distribution. I re-ran:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/nki/05_cwas
</span><span class="line"><span class="c"># I set the reference mdmr in these scripts</span>
</span><span class="line">./30_mdmr.bash short compcor 8
</span><span class="line">./30_mdmr.bash medium compcor 8
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="analysis">Analysis</h4>

<p>To generate the false positives, see <code>/home2/data/Projects/CWAS/share/results/20_cwas_iq/40_false_positives.R</code>. </p>

<h4 id="plot">Plot</h4>

<p>Then to plot the histogram, see <code>/home2/data/Projects/CWAS/share/figures/fig_03/D_signif_hists.R</code>.</p>

<h3 id="figure-5-done">Figure 5 (DONE)</h3>

<p>The relevant files for plotting are located in this directory <code>/home2/data/Projects/CWAS/share/figures/sfig_yeo</code>.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/sfig_yeo
</span><span class="line">./A_pysurfer_yeo_and_cwas_iq.py
</span><span class="line">./B1_network_byarea.R
</span><span class="line">./B2_cropify.py
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="figure-6-done">Figure 6 (DONE)</h3>

<p>The files for plotting are located in <code>/home2/data/Projects/CWAS/share/figures/sfig_neurosynth</code>. Note that you will need to first plot the elements of Figure 3.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/sfig_neurosynth
</span><span class="line">./10_combine_pysurfer.py
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="figure-7-done">Figure 7 (DONE)</h3>

<p>For the mean connectivity regression, I would use the same transformation as redone with Figure 3. I do need to redo the transformation for Figure 7.</p>

<p>The below script will run MDMR for IQ with mean connectivity as a covariate as well as for mean connectivity as the main effect.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">./30_mdmr_with_gcors.bash short compcor 8; <span class="se">\</span>
</span><span class="line">./30_mdmr_with_gcors.bash medium compcor 8
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The below script will run MDMR for IQ using GSR corrected data.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">./33_mdmr_gsr.bash short compcor 8; <span class="se">\</span>
</span><span class="line">./33_mdmr_gsr.bash medium compcor 8
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="multiple-comparisons">Multiple Comparisons</h4>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="c"># Mean Connectivity</span>
</span><span class="line">./34_mdmr_correct_with_gcors.bash short compcor 8; <span class="se">\</span>
</span><span class="line">./34_mdmr_correct_with_gcors.bash medium compcor 8
</span><span class="line"><span class="c"># GSR</span>
</span><span class="line">./34_mdmr_correct_gsr.bash short compcor 8; <span class="se">\</span>
</span><span class="line">./34_mdmr_correct_gsr.bash medium compcor 8
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="plots-1">Plots</h4>

<p>This is a 3 x 2 plot with </p>

<ul>
  <li>rows = type of processing (GSR, Mean Connectivity, No Correction)</li>
  <li>cols = scan (1, 2)</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/fig_04
</span><span class="line"><span class="c"># Row 1: GSR</span>
</span><span class="line">./Aa_cwas_gsr_pysurfer_easythresh.py
</span><span class="line">
</span><span class="line"><span class="c"># Row 2: Mean Connectivity</span>
</span><span class="line">./Ab_cwas_mean_connectivity_pysurfer_easythresh.py
</span><span class="line">
</span><span class="line"><span class="c"># Row 3: Already Run (Fig 3)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="figure-8-done">Figure 8 (DONE)</h3>

<p>The relevant scripts to generate the plots are in <code>/home2/data/Projects/CWAS/share/figures/fig_05</code> and <code>/home2/data/Projects/CWAS/share/results/40_mdmr_glm</code> (although I’m not too sure how the second folder is relevant).</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/fig_05
</span><span class="line">./A_glm_vs_mdmr_scatter_plots.R
</span><span class="line">./B_surface_glm_vs_mdmr_top_percentiles.py
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="figure-9-done">Figure 9 (DONE)</h3>

<p>The relevant analytic and plotting scripts are located in <code>/home2/data/Projects/CWAS/share/nki/08_sca_voxelwise</code> and <code>/home2/data/Projects/CWAS/share/nki/08_sca_voxelwise_scan2</code>. There’s actually not much analysis, just compiling the data together.</p>

<p>Note that I will need to also redo the statistics on this graph comparing the different ROI groups within each scan.</p>

<h4 id="scan-1">Scan 1</h4>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/nki/08_sca_voxelwise
</span><span class="line">./10_calc_peaks.bash
</span><span class="line">./20_select_rois.R
</span><span class="line">./30_sca.R
</span><span class="line">./40_plot.R
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="scan-2">Scan 2</h4>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/nki/08_sca_voxelwise_scan2
</span><span class="line">./10_calc_peaks.bash
</span><span class="line">./20_select_rois.R
</span><span class="line">./30_sca.R
</span><span class="line">./40_plot.R
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="outputs">Outputs</h4>

<p>The images for both scans should be in <code>figures/fig_06</code>.</p>

<h3 id="figure-10-done">Figure 10 (DONE)</h3>

<p>This figure covers CWAS for three different datasets.</p>

<h4 id="cwas">CWAS</h4>

<h5 id="development">Development</h5>

<p>Scripts are in <code>/home2/data/Projects/CWAS/share/development+motion/04_analysis</code>. I ran it as follows:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/development+motion/04_analysis
</span><span class="line">./02a_mdmr.bash <span class="c"># note ran all combos…relevant for supplementary</span>
</span><span class="line">./04_mdmr_correct.bash
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><strong>DONE</strong></p>

<h5 id="adhd">ADHD</h5>

<p>Scripts are in <code>/home2/data/Projects/CWAS/share/adhd200_rerun/05_analysis</code>. I ran it as follows:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/adhd200_rerun/05_analysis
</span><span class="line">./30_mdmr_combined.bash compcor
</span><span class="line">./50_mdmr_correct.bash compcor
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><strong>DONE</strong></p>

<h5 id="ldopa">LDOPA</h5>

<p>Scripts are in <code>/home2/data/Projects/CWAS/share/ldopa/04_analysis</code>. I ran it as follows:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/ldopa/04_analysis
</span><span class="line">./02a_mdmr.bash
</span><span class="line">./04_mdmr_correct.bash compcor
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><strong>DONE</strong></p>

<h4 id="plots-2">Plots</h4>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/fig_07
</span><span class="line">./A_pysurfer_easythresh.py
</span><span class="line">./B1_network_byarea.R
</span><span class="line">./B2_cropify.py
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The output goes to <code>figures/fig_07</code>.</p>

<h3 id="figure-11-done">Figure 11 (DONE)</h3>

<p>This requires redoing all the ROI-based MDMRs for the IQ analysis. Although this particular figure only shows one of the scans, might as well do both scans here as one of the supplementary figures will depend on it.</p>

<p>Below are the commands that I ran. Note that the mdmr commands will also transform the previous distances.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/nki/05_cwas
</span><span class="line">./30_mdmr_rois.bash short compcor 0
</span><span class="line">./34_mdmr_correct_rois.bash short compcor 0
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>To plot the data in surface space, I need to run the following</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/sfig_roi_comparison
</span><span class="line">./30_parcellations_pysurfer.py
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The results will be in <code>/home2/data/Projects/CWAS/figures/sfig_roi_comparison</code>.</p>

<h3 id="figure-12-done">Figure 12 (DONE)</h3>

<p><strong>I need to redo the MDMR Analyses</strong></p>

<p>Here, we’ll need to redo the 800 parcellations for the other 3 datasets. I should have the IQ results from Figure 11.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="c"># Development</span>
</span><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/development+motion/04_analysis
</span><span class="line">./02a_mdmr_rois.bash <span class="c"># this runs correction as well</span>
</span><span class="line">
</span><span class="line"><span class="c"># ADHD</span>
</span><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/adhd200_rerun/05_analysis
</span><span class="line">./30_mdmr_combined_rois.bash compcor
</span><span class="line">
</span><span class="line"><span class="c"># LDOPA</span>
</span><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/ldopa/04_analysis
</span><span class="line">./02a_mdmr_rois.bash
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>To generate the images, do the following:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/sfig_roi_comparison
</span><span class="line">./40_comparison_datasets_pysurfer.py
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Output can be found in <code>/home2/data/Projects/CWAS/figures/sfig_roi_comparison</code>.</p>

<h3 id="supp-figure-1-done">Supp Figure 1 (DONE)</h3>

<p>This one definitely needs redoing as it directly displays the distances.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/nki/06_stability
</span><span class="line">./14_stability_N104.R
</span><span class="line">./24_zscore_N104.R
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Output can be found in <code>/home2/data/Projects/CWAS/nki/stability/N104_compcor_kvoxs_fwhm08_to_kvoxs_fwhm08</code>.</p>

<p>To generate the plots run:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/fig_02
</span><span class="line">./A_pysurfer_cv_zscore.py
</span><span class="line">./B_pysurfer_consistency_zscore.py
</span><span class="line">./C_scatter_plot_cv_vs_consistency.R
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The output will be in <code>figures/fig_02</code>.</p>

<h3 id="supp-figure-2-done">Supp Figure 2 (DONE)</h3>

<p><strong>REDO DUE TO OTHER 3 DATASETS</strong></p>

<p>This figure shows each of the dataset results using the permutation-based correction.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/sfig_permutation
</span><span class="line">./A_iq_pysurfer_perms.py
</span><span class="line">./B_others_pysurfer_perms.py
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Output can be found in <code>/home2/data/Projects/CWAS/figures/sfig_permutations</code>.</p>

<h3 id="supp-figure-3-done">Supp Figure 3 (DONE)</h3>

<p>Shows the mean connectivity for IQ dataset.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/fig_04
</span><span class="line">./B_cwas_global_pysurfer_easythresh.py
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Output can be found in <code>figures/fig_04</code>.</p>

<h3 id="supp-figure-4-done">Supp Figure 4 (DONE)</h3>

<p>This compares preprocessing effects on CWAS for age looking at inclusion/exclusion of global and motion covariates.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/sfig_dev_global
</span><span class="line">./A_pysurfer_easythresh.py
</span><span class="line">./x_comparison.R
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Output is in <code>figures/sfig_dev_motion_global</code>.</p>

<h3 id="supp-figure-5-done">Supp Figure 5 (DONE)</h3>

<p>This directly examines the effect of motion across different global correction strategies.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/sfig_motion
</span><span class="line">./A_pysurfer_easythresh.py
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Output is in <code>figures/sfig_motion</code>.</p>

<h3 id="supp-figure-6-done">Supp Figure 6 (DONE)</h3>

<p>Last one that varies the number of parcellations and examines the effect of parcellation set on 3 different measures.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd</span> /home2/data/Projects/CWAS/share/figures/sfig_roi_comparison
</span><span class="line">./10_plot_parcel_metrics.R
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Output is in <code>figures/sfig_roi_comparison</code>.</p>
<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>I am still working on getting latex to work so these math equations will be not be displayed well for now.<a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Zarrar Shehzad</span></span>

      








  


<time datetime="2013-11-05T20:26:00-05:00" pubdate data-updated="true">Nov 5<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/cwas/'>cwas</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://czarrar.github.io/blog/2013/11/05/rerunning-cwas-using-transformed-correlations/" data-via="" data-counturl="http://czarrar.github.io/blog/2013/11/05/rerunning-cwas-using-transformed-correlations/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left articlenav" href="/blog/2013/11/05/tuesday/" title="Previous Post: Tuesday">&laquo; Tuesday</a>
      
      
        <a class="basic-alignment right articlenav" href="/blog/2013/11/06/wednesday-nki/" title="Next Post: wednesday nki">wednesday nki &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    
  <section>
  <h1>Contents</h1>
  <ol class="nested" style="margin-left: 1.3em;">
<li class="nested" style="list-style:inherit;">
	<a href="#code">Code</a>
<ol class="nested" style="margin-left: 1.3em;">		<li class="nested" style="list-style:inherit;"><a href="#transformation-of-distances">Transformation of Distances</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#permuting-residuals-of-predictor-variable">Permuting Residuals of Predictor Variable</a></li>
</ul>
</li><li class="nested" style="list-style:inherit;">
	<a href="#normandy-aka-redoing-almost-all-figures">Normandy (aka Redoing Almost All Figures)</a>
<ol class="nested" style="margin-left: 1.3em;">		<li class="nested" style="list-style:inherit;"><a href="#what-figures">What Figures</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#figure-3-done">Figure 3 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#figure-4-done">Figure 4 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#figure-5-done">Figure 5 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#figure-6-done">Figure 6 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#figure-7-done">Figure 7 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#figure-8-done">Figure 8 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#figure-9-done">Figure 9 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#figure-10-done">Figure 10 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#figure-11-done">Figure 11 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#figure-12-done">Figure 12 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#supp-figure-1-done">Supp Figure 1 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#supp-figure-2-done">Supp Figure 2 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#supp-figure-3-done">Supp Figure 3 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#supp-figure-4-done">Supp Figure 4 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#supp-figure-5-done">Supp Figure 5 (DONE)</a></li>
 		<li class="nested" style="list-style:inherit;"><a href="#supp-figure-6-done">Supp Figure 6 (DONE)</a></li>
</ul>
</li></ol>
  </section>

<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/abide' style='font-size: 160.0%'>abide(7)</a> <a href='/blog/categories/cmi' style='font-size: 108.57142857142857%'>cmi(1)</a> <a href='/blog/categories/cpac' style='font-size: 151.42857142857144%'>cpac(6)</a> <a href='/blog/categories/cwas' style='font-size: 134.28571428571428%'>cwas(4)</a> <a href='/blog/categories/emotional-bs' style='font-size: 117.14285714285714%'>emotional-bs(2)</a> <a href='/blog/categories/jekyll' style='font-size: 108.57142857142857%'>jekyll(1)</a> <a href='/blog/categories/mdmr' style='font-size: 108.57142857142857%'>mdmr(1)</a> <a href='/blog/categories/nilearn' style='font-size: 125.71428571428572%'>nilearn(3)</a> <a href='/blog/categories/quickpack' style='font-size: 151.42857142857144%'>quickpack(6)</a> <a href='/blog/categories/writedown' style='font-size: 108.57142857142857%'>writedown(1)</a> </span>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/11/22/friday-week-47/">Friday - Week 47</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/21/thursday-week-47/">Thursday - Week 47</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/20/wednesday-week-47/">Wednesday - Week 47</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/19/tuesday-week-47/">Tuesday - Week 47</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/18/more-quick-pack-testing/">More Quick Pack Testing</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/czarrar">@czarrar</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'czarrar',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll...</ul>
  <p><a href="http://pinboard.in/u:czarrar">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "czarrar"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>

<!--
    Calendar aside/plugin for octopress blogging framework.
    Copyright (C) 2012  Neeraj Kumar ( neerajpkumar@gmail.com, neerajkumar@outlook.com)

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<style>
	.highlighted-calendar-day
	{
		color : #CCC;
		font-weight : bold;
	}
	
	.calendar-header-day{
		font-weight : bold;
		color : #AAA;
		font-size : 14px;
	}
	
	.highlighted-calendar-day a
	{
		
	}
	
	.prev-link
	{
		float:left;
	}
	
	.next-link
	{
		float: right;
	}
	.calendar-day
	{
		color : #888;
		font-weight : 12px;
	}
	
	.calendar-table
	{
		width : 100%;
		
	}
	
	.calendar-table td
	{
		border-right : dotted 1px lightgrey;
		text-align : center;
	}
	
	.calendar-table td:last-child
	{
		border-right : none;
	}
	
	.calendar-table th
	{
		background-color : lightgrey;
		text-align : center;
	}
	.prevCalendarLink img
	{	
		
		width : 20px;
		height : 20px;
		border: 0px;
		float: left;
		
	}
	
	.nextCalendarLink img
	{
		
		width : 20px;
		height: 20px;
		border: 0px;
		float: right;
		
	}
</style>
<script type="text/javascript" src="/javascripts/calendar.js"></script>
<section id="calendarDiv">
	<h1>Calendar</h1>
	<span style="display:block" id="calendarSpan"></span>
	<div>
		<a href="#" class="previousMonth show"/><a href="#" class="nextMonth hide"/>
	</div>
</section>
<script type="text/javascript">
  
monthCalendar = function(id,year,month)
{
  var highlightArray = new Array();
  var hightlightLinks = new Array();
  
  highlightArray.push('11/22/2013');
  hightlightLinks.push('/blog/2013/11/22/friday-week-47/');
  
  highlightArray.push('11/21/2013');
  hightlightLinks.push('/blog/2013/11/21/thursday-week-47/');
  
  highlightArray.push('11/20/2013');
  hightlightLinks.push('/blog/2013/11/20/wednesday-week-47/');
  
  highlightArray.push('11/19/2013');
  hightlightLinks.push('/blog/2013/11/19/tuesday-week-47/');
  
  highlightArray.push('11/18/2013');
  hightlightLinks.push('/blog/2013/11/18/more-quick-pack-testing/');
  		
  var cal = new Calendar(month,year,highlightArray,hightlightLinks);
  cal.generateHTML(id);
  var element = document.getElementById(id);
  element.innerHTML = cal.getHTML();
}
	
loadCalendar = function(){
  var now = new Date();
  var month = now.getMonth();
  var year = now.getFullYear();
  monthCalendar('calendarDiv',year,month);
}
	
	if(Array.prototype.indexOf == undefined)
	{
		 Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {
			"use strict";
			if (this == null) {
				throw new TypeError();
			}
			var t = Object(this);
			var len = t.length >>> 0;
			if (len === 0) {
				return -1;
			}
			var n = 0;
			if (arguments.length > 0) {
				n = Number(arguments[1]);
				if (n != n) { // shortcut for verifying if it's NaN
					n = 0;
				} else if (n != 0 && n != Infinity && n != -Infinity) {
					n = (n > 0 || -1) * Math.floor(Math.abs(n));
				}
			}
			if (n >= len) {
				return -1;
			}
			var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);
			for (; k < len; k++) {
				if (k in t && t[k] === searchElement) {
					return k;
				}
			}
			return -1;
		}
	}
$(document).ready(function(){
  loadCalendar();
});
</script>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Zarrar Shehzad -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
