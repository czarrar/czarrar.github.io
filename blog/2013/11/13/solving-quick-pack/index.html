
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Solving Quick Pack - Zarrar's Journaling</title>
  <meta name="author" content="Zarrar Shehzad">

  
  <meta name="description" content="Running ALFF It all appears to run fine except one link node. 1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
131113-12:02:04 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://czarrar.github.io/blog/2013/11/13/solving-quick-pack">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Zarrar's Journaling" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<script src="/javascripts/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.tableofcontents.min.js" type="text/javascript"></script>
<script src="/javascripts/generate-toc.js" type="text/javascript"></script>

<script type="text/javascript">
  // Revert jQuery's '$' alias, to avoid clashes with ender.js. NOTE: Use
  // jQuery(...), instead of $(...) from here on.
  jQuery.noConflict();
</script>
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Zarrar's Journaling</a></h1>
  
    <h2>To the edge and beyond</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:czarrar.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Solving Quick Pack</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-13T12:04:00-05:00" pubdate data-updated="true">Nov 13<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><h1>Running ALFF</h1>

<p>It all appears to run fine except one link node.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>131113-12:02:04,683 workflow ERROR:                                                                                                                                     [575/9353]
</span><span class='line'>         ['Node link_16.a0 failed to run on host rocky.']
</span><span class='line'>131113-12:02:04,684 workflow INFO:
</span><span class='line'>         Saving crash info to /home2/data/Projects/ABIDE_Initiative/CPAC/test_qp/crash/crash-20131113-120204-milham-link_16.a0.npz
</span><span class='line'>131113-12:02:04,685 workflow INFO:
</span><span class='line'>         Traceback (most recent call last):
</span><span class='line'>  File "/home2/data/Projects/CPAC_Regression_Test/nipype-installs/fcp-indi-nipype/running-install/lib/python2.7/site-packages/nipype/pipeline/plugins/multiproc.py", line 18, in r
</span><span class='line'>un_node
</span><span class='line'>    result['result'] = node.run(updatehash=updatehash)
</span><span class='line'>  File "/home2/data/Projects/CPAC_Regression_Test/nipype-installs/fcp-indi-nipype/running-install/lib/python2.7/site-packages/nipype/pipeline/engine.py", line 1282, in run
</span><span class='line'>    self._run_interface()
</span><span class='line'>  File "/home2/data/Projects/CPAC_Regression_Test/nipype-installs/fcp-indi-nipype/running-install/lib/python2.7/site-packages/nipype/pipeline/engine.py", line 1380, in _run_inter
</span><span class='line'>face
</span><span class='line'>    self._result = self._run_command(execute)
</span><span class='line'>  File "/home2/data/Projects/CPAC_Regression_Test/nipype-installs/fcp-indi-nipype/running-install/lib/python2.7/site-packages/nipype/pipeline/engine.py", line 1504, in _run_comma
</span><span class='line'>nd
</span><span class='line'>    result = self._interface.run()
</span><span class='line'>  File "/home2/data/Projects/CPAC_Regression_Test/nipype-installs/fcp-indi-nipype/running-install/lib/python2.7/site-packages/nipype/interfaces/base.py", line 895, in run
</span><span class='line'>    runtime = self._run_interface(runtime)
</span><span class='line'>  File "/home2/data/Projects/CPAC_Regression_Test/nipype-installs/fcp-indi-nipype/running-install/lib/python2.7/site-packages/nipype/interfaces/utility.py", line 412, in _run_int
</span><span class='line'>erface
</span><span class='line'>    out = function_handle(**args)
</span><span class='line'>  File "&lt;string&gt;", line 16, in prepare_symbolic_links
</span><span class='line'>  File "/home2/data/Projects/CPAC_Regression_Test/2013-05-30_cwas/C-PAC/CPAC/utils/utils.py", line 562, in create_symbolic_links
</span><span class='line'>    ext = fname.split('.', 1)[1]
</span><span class='line'>IndexError: list index out of range
</span><span class='line'>Interface Function failed to run. </span></code></pre></td></tr></table></div></figure>


<p>The error occurs because a path without a file is passed. It&rsquo;s a little unclear why this link is even being run? Let&rsquo;s get some background straight.</p>

<h1>What is sinked and linked?</h1>

<p>So we can see what&rsquo;s being synced with the following line of code towards the end:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'>for strat in strat_list:
</span><span class='line'>  rp = strat.get_resource_pool()
</span><span class='line'>  # …</span></code></pre></td></tr></table></div></figure>


<p>The variable <code>rp</code> is basically a dictionary with the key being a node name (e.g., <code>functional_mni</code>) and the value being a tuple with the actual node and the actual out_file. With my run of ALFF, below are the values of rp:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="p">{</span><span class="s">&#39;alff_Z_img&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">alff_falff_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.alff_Z_img&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;alff_Z_smooth&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">alff_Z_smooth_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;out_file&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;alff_Z_to_standard&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">alff_Z_to_standard_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.out_file&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;alff_Z_to_standard_smooth&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">alff_Z_to_standard_smooth_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;out_file&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;alff_img&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">alff_falff_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.alff_img&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;anatomical_brain&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">anatomical_brain_gather_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.anat&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;anatomical_reorient&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">anatomical_reorient_gather_0</span><span class="p">,</span> <span class="s">&#39;outputspec.anat&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;anatomical_to_mni_nonlinear_xfm&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">anatomical_to_mni_nonlinear_xfm_gather_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.anat&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;ants_affine_xfm&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">ants_affine_xfm_gather_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.anat&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;falff_Z_img&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">alff_falff_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.falff_Z_img&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;falff_Z_smooth&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">falff_Z_smooth_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;out_file&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;falff_Z_to_standard&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">falff_Z_to_standard_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.out_file&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;falff_Z_to_standard_smooth&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">falff_Z_to_standard_smooth_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;out_file&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;falff_img&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">alff_falff_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.falff_img&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;functional_brain_mask&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">functional_brain_mask_gather_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.rest&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;functional_brain_mask_to_standard&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">functional_brain_mask_to_standard_gather_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.rest&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;functional_freq_filtered&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">functional_freq_filtered_gather_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.rest&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;functional_mni&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">functional_mni_gather_0</span><span class="p">,</span> <span class="s">&#39;outputspec.rest&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;functional_nuisance_residuals&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">functional_nuisance_residuals_gather_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.rest&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;functional_to_anat_linear_xfm&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">functional_to_anat_linear_xfm_gather_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.rest&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;mean_functional&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">mean_functional_gather_0</span><span class="p">,</span> <span class="s">&#39;outputspec.rest&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;mni_normalized_anatomical&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">mni_normalized_anatomical_gather_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.anat&#39;</span><span class="p">),</span>
</span><span class='line'> <span class="s">&#39;preprocessed&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">resting_preproc_0051466_session_1</span><span class="o">.</span><span class="n">preprocessed_gather_0</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&#39;outputspec.rest&#39;</span><span class="p">)}</span>
</span></code></pre></td></tr></table></div></figure>


<p>With that in mind, we can try to understand for the link error, what&rsquo;s the related node. It appears that it is related to the functional_freq_filtered node name as the input path for linking is <code>/home2/data/Projects/ABIDE_Initiative/CPAC/test_qp/ALFF_Output/pipeline_me/0051466_session_1/functional_freq_filtered/_scan_rest_1_rest/sinker_16</code>.</p>

<p>Since the actually input files like functional_freq_filtered are not copied into the working directory, the sink and link will not work as there is nothing to sink/link from the working directory. How can I tackle this issue?</p>

<ul>
<li>I could create a workaround to not run sinking/linking for these particular strategies. For instance if preprocessing or what not were not turned on.</li>
<li>In my get_func… function, I could do a soft-link inside the current directory. However this would need to be a second step, no?</li>
</ul>


<h1>Issues</h1>

<h2>Fix Error</h2>

<p>Spoke to Cameron and will be creating an exclusion or stop list. I&rsquo;m thinking that as I&rsquo;m adding the particular files to the strategy pool, I want to add the node name to an exclusion list as well. Yup these set of changes got it going.</p>

<h2>Symlinks Error</h2>

<p>After fixing the prior issue, I then noticed that the symlinks directory is sort-of weird. There&rsquo;s a lot of repetition. For instance, here are some of the main directories:</p>

<ul>
<li>scan_rest_1_rest_rest_1_rest</li>
<li>scan_rest_1_rest_rest_1_rest_rest_1_rest</li>
<li>scan_rest_1_rest_rest_1_rest_rest_1_rest_rest_1_rest</li>
</ul>


<p>One of these directories as the alff/falff output for native space and with/without smoothing. The second is the output in standard space while the third is the same thing but with smoothing. A little obtuse.</p>

<p>The sink directory on the other hand is fairly normal and easy to work through. So my current thought is to simply use this going forward and make my own symlinks generation script.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Zarrar Shehzad</span></span>

      








  


<time datetime="2013-11-13T12:04:00-05:00" pubdate data-updated="true">Nov 13<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/quickpack/'>quickpack</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://czarrar.github.io/blog/2013/11/13/solving-quick-pack/" data-via="" data-counturl="http://czarrar.github.io/blog/2013/11/13/solving-quick-pack/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/11/12/abide-sge-debug/" title="Previous Post: ABIDE SGE Debug">&laquo; ABIDE SGE Debug</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/11/13/solving-quick-pack/">Solving Quick Pack</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/12/abide-sge-debug/">ABIDE SGE Debug</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/11/monday-for-veterans/">Monday for Veterans</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/09/comparing-distances/">Comparing Distances</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/08/friday-save-the-date/">Friday - Save the Date</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Zarrar Shehzad -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>







</body>
</html>
